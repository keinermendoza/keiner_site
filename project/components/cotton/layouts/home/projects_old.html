{% load static markdown %}

<section id="proyectos" class="px-4 md:px-6 lg:px-8 bg-custom-gray" id="porjects">
    <div class="max-w-7xl mx-auto py-10">

        <div class="text-center mb-10">
            <h2 class="text-4xl">PRINCIPALES PROYECTOS</h2>
            <p class="text-xl">Sitios web reales para clientes reales</p>
        </div>

        <div id="project-cards-container"
            class="">
            {% for project in projects %}

            <!-- Row project description/swipper-images  -->
            <div class="grid grid-cols-1 xl:grid-cols-2 gap-y-10 gap-x-24"
                x-data="{showDesktop:true}" >
                <!-- Container project Tite and Description -->
                <article 
                    x-data="{isOpen:false}"
                    class="w-full gap-3 p-3 sm:p-5 flex flex-col
                    bg-white rounded-xl shadow-xl">
    
                    <h3 class="uppercase text-2xl">{{ project.customer}}</h3>
                    <p class="text-xl text-gray-600">{{project.customer_commercial_field}}</p>

                    {% comment %} <a class="text-primary" href="{{ project.url}}">
                        <span>Sitio: </span> 
                        <span>{{ project.url}}</span>
                    </a> {% endcomment %}
                    <p class="text-xl text-gray-600">Servicios Prestados</p>

                    <!-- Markdown Description Project -->
                    <div class="grow markdown-simple-container overflow-hidden relative after:content-['']"
                    x-bind:class="isOpen ? 'max-h-max' : 'max-h-60 after:bottom-0 after:left-0 after:w-full after:bg-gradient-to-b from-[rgba(255,255,255,0)] to-white  after:absolute after:h-36' ">
                        {{ project.description_html | markdown }}
                    </div>

                    <!-- Toogle read more and less Button -->
                    <div class="ms-auto">
                        <button 
                        class="text-center flex justify-center items-center gap-x-2 transition-color 
                        outline-offset-4 hover:bg-cyan-700
                        hover:outline-white bg-[#1b98df] rounded-md py-2 px-4"
                            x-text="isOpen ? 'Leer Menos': 'Leer Más'"
                            @click="isOpen = !isOpen"
                            ></button>
                    </div>
                
                    <!-- Toogle swipper desing Button -->
                    <footer class="flex justify-between gap-x-3">
                        <span class="text-sm max-w-40">Mostrando Diseño para 
                            <span class="underline underline-offset-2" x-text="showDesktop ? 'Computadores' : 'Telefonos' "></span>
                        </span>

                        <div id="buttons-previw-container" class="flex gap-x-3">
                            <button
                            class="text-center flex justify-center items-center gap-x-2 transition-color 
                            outline-offset-4 hover:bg-cyan-700
                            hover:outline-white bg-[#1b98df] rounded-md py-2 px-4"
                            x-bind:class="!showDesktop && 'bg-gradient-to-b from-yellow-500 to to-orange-500' "
                            @click="showDesktop = false"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3" />
                                </svg>
                            </button>
                            <button
                                class="text-center flex justify-center items-center gap-x-2 transition-color 
                                outline-offset-4 hover:bg-cyan-700
                                hover:outline-white bg-[#1b98df] rounded-md py-2 px-4"
                                x-bind:class="showDesktop && 'bg-gradient-to-b from-yellow-500 to to-orange-500' "
                                @click="showDesktop = true"
                                >
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25" />
                                </svg>
                            </button>
                        </div>

                    </footer>
                </article>
            
                <!-- swipper section container -->
                
                <div class="relative w-full  ">

                    <!--  Swipper Desktop Images -->
                    <div class="right-0 mx-auto w-4/5 overflow-hidden"
                        x-bind:class="showDesktop ? 'left-0 relaitve' :' absolute left-[9999px]' ">
                        <swiper-container class="w-full" autoplay="true" effect="cards" grab-cursor="true" speed="800" loop="true">
                            {% for image in project.get_images_desktop  %}
                            <swiper-slide  >
                                <figure class="w-full h-full rounded-md overflow-hidden">
                                    <img 
                                    class="h-full w-full object-cover"
                                    src="{{ image.image.url }}" alt="{{image.alt}}">
                                </figure>
                            </swiper-slide>
                            {% endfor %}
                        </swiper-container>
                    </div>

                    <!--  Swipper Mobile Images -->
                    <div class="right-0 mx-auto h-full w-1/2 "
                        x-bind:class="!showDesktop ? 'left-0 relaitve' : ' absolute -left-[9999px]' ">
                        <swiper-container  class="w-full" autoplay="true" effect="cards" grab-cursor="true" speed="800" loop="true">
                            {% for image in project.get_images_mobile  %}
                            <swiper-slide  >
                                <figure class="w-full h-full rounded-md overflow-hidden">
                                    <img
                                    class="h-full w-full object-cover"
                                    src="{{ image.image.url }}" alt="{{image.alt}}">
                                </figure>
                            </swiper-slide>
                            {% endfor %}
                        </swiper-container>
                    </div>
                        
                        
                </div>    

                <!-- end row description/swipper-images -->
            </div>

            {% if project.video_demo %}
            <div class="flex flex-col gap-3 items-center my-10">
                <p class="text-xl text-gray-600">Demostracion del Proyecto</p>
                <iframe class="mx-auto max-w-4xl w-full aspect-video relative z-10 rounded-lg" src="{{project.video_demo}}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
            </div>
            {% endif %}

            {% if not forloop.last %}
            <c-ui.division-line />
            {% endif %}

        {% endfor %}
        </div>    

    </div>
</section>